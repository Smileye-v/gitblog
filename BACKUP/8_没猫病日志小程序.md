# [没猫病日志小程序](https://github.com/Smileye-v/gitblog/issues/8)

### 初期功能规划
主要实现功能：日历式治疗记录 
后续可增加功能：猫饭食谱，营养记录，病情状况科普自查
1、主体是日历模式的每日治疗记录：治疗日期记录（打针天数，最近一次打针日期及距今几天），治疗时间（时间段），针剂/片剂的用量（根据填写信息计算得出的用药量和实际的注射情况，如漏液补打），注射部位（希望可以实现猫型平面图选择部位），体重变化情况（根据填写的用药信息更新计算用药剂量），猫咪症状（漏液皮肤溃烂or呕吐拉稀等），其他备注（针对并发症的辅助用药）
2、猫咪信息的添加：性别，年龄，体重，药物治疗信息（针剂or片剂，用量及浓度 **ml/kg+0.1损耗）（附加：药物治疗会根据猫咪情况加量，药物信息更新保留上一时间段的用药量记录）
3、后续考虑：将治疗信息导出为数据表，可供医院or药商针对咨询
4、后续考虑：增加猫咪诊疗记录，每次诊疗的检查报告及处方筏等信息

> 参考图片来自猫传腹小组公众号
![截图](https://user-images.githubusercontent.com/68359161/226514011-eb7b3c83-c47e-4ec3-a2fc-cf3a9cfb3405.png)
![截图1](https://user-images.githubusercontent.com/68359161/226514023-6e9856e9-af83-46d8-97f9-50d54f57dbd2.png)


### 数据表和页面信息表设计
![image](https://user-images.githubusercontent.com/68359161/226530567-c3ae8a8d-e771-4540-b9b7-0d0047ac8ca3.png)
![image](https://user-images.githubusercontent.com/68359161/226530665-727ba60f-329b-4483-bc52-eb1b8e802243.png)
![image](https://user-images.githubusercontent.com/68359161/226530705-f0b233a9-b4dd-45c5-8094-38f3b0be036e.png)


---

### 后端数据处理使用了Laf云开发
挺方便的一个平台，但是数据感觉不是很好处理，更新了新版，后期要做迁移，观摩看有没有更好的处理方式

### 小程序的开发感悟
微信开发挺拉的，不能使用svg属实有点麻烦，依赖的管理也挺麻烦，在做上传图片的时候因为是三方依赖不兼容，换了好几个方案（svg解决方案 #16 

### 小程序第一版成功上线
![gh_288adeaca745_430](https://user-images.githubusercontent.com/68359161/226531512-da279615-1b75-4820-b580-76007f6f8559.jpg)


---

更新记录
**V1.0.3（2023/03/15）**

- 优化各个数据设置交互和保存设置
- 限制未到日期的数据设置
- 优化猫咪年龄显示，增加月龄
- 增加初始体重数据，对异常体重的剂量计算

**V1.0.4（2023/03/15）**

- 修复无初始体重，治疗用量计算NaN问题

**V1.0.5（2023/03/16）**

- 修改体重降低时的剂量计算

**V1.1.0  (2023/03/23)**

- 修改体重剂量等数据类型，限制只能数据浮点数
- 增加首页分享功能
- 页面增加下拉刷新功能
- 增加删除治疗记录功能
- 增加注射部位多选功能
- 调整部分UI

**V1.1.1 (2023/03/24)**

- 修复首页下拉刷新bug

**V1.1.2 (2023/04/07)**

- 迁移云开发平台至新版

**V1.2.1 (2023/05/11)**

- 增加共养成员数据关联绑定功能
- 添加关于页面，增加反馈功能

**V1.2.2 (2023/06/09)**

- 修复治疗日期计算错误bug

**V1.3.0 (2023/07/13)**

- 增加背部打针部位选择

**V1.3.1 (2023/08/17)**

- 修改家庭设置共同管理bug

**V1.3.2 (2023/11/10)**

- 删除治疗记录，体重记录未删除bug
- 体重变化与记录最高值对比，避免剂量下降情况

**v1.4.1 (2023/12/13)**

- 每次新增记录自动添加昨日时间记录
- 增加新展示页面，以日期列表形式展示打针位置时间剂量等信息

**v1.4.5 (2024/02/02)**

- 头像无法更改bug修复

**v1.4.7 (2024/02/23)**

- 体重变化剂量修改算法处理

**v1.4.8 (2024/02/29)**

- 剂量计算修改

---

### 准备弃用Laf云开发平台，考虑更换阿里云

laf平台计费并不便宜，一个月至少20元。且该平台又需要进行迁移，稳定性不够。

**更换方案选项：**

1. 阿里云函数计算（FC）+ 表格存储（Tablestore）+ OSS 实现
2. 阿里云轻量应用服务器搭建laf + OSS 实现

**最新方案：**
我又发现个好东西，模式基本和laf相同，阿里云的EMAS Serverless，包含云函数、云数据库、云存储、静态网站托管等功能
并且有免费版，配置基本可以实现小程序的维护

**TODO**
考虑重构整个项目，更换成uni-app，并增加新功能

**迁移已全部完成**
迁移步骤 https://note.youdao.com/s/4ELEe3OG